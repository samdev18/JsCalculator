function pegaTecla(){let tecla=event.keyCode,valor;switch(tecla){case 48:case 96:valor=0;break;case 49:case 97:valor=1;break;case 50:case 98:valor=2;break;case 51:case 99:valor=3;break;case 52:case 100:valor=4;break;case 53:case 101:valor=5;break;case 54:case 102:valor=6;break;case 55:case 103:valor=7;break;case 56:case 104:valor=8;break;case 57:case 105:valor=9;break;case 107:valor="+";break;case 13:valor="=";break;case 109:case 189:valor="-";break;case 106:valor="x";break;case 193:case 111:valor="รท";break;case 188:case 190:valor=".";break;case 8:clearInput()}8!=tecla&&(handleKeyPress(valor),evaluate(valor))}window.addEventListener("load",(function(event){document.addEventListener("keydown",pegaTecla)}));const input=document.querySelector(".input"),result=document.querySelector(".result"),deleteBtn=document.querySelector(".delete"),keys=document.querySelectorAll(".bottom span");let operation="",answer,decimalAdded=!1;const operators=["+","-","x","รท"];function handleKeyPress(e){let key="",lastChar="";if(null!=e.target&&null!=e.target?(key=e.target.dataset.key,lastChar=operation[operation.length-1]):(key=e,lastChar=operation[operation.length-1]),"="!==key&&("."!==key||!decimalAdded)){if(-1!==operators.indexOf(key)&&(decimalAdded=!1),0===operation.length&&"-"===key)return operation+=key,void(input.innerHTML=operation);if(0!==operation.length||-1===operators.indexOf(key))return-1!==operators.indexOf(lastChar)&&-1!==operators.indexOf(key)?(operation=operation.replace(/.$/,key),void(input.innerHTML=operation)):key?("."===key&&(decimalAdded=!0),operation+=key,void(input.innerHTML=operation)):void 0;input.innerHTML=operation}}function evaluate(e){let key,lastChar;if(console.log(e.target),null!=e.target?(key=e.target.dataset.key,lastChar=operation[operation.length-1]):(key=e,lastChar=operation[operation.length-1]),"="===key&&-1!==operators.indexOf(lastChar)&&(operation=operation.slice(0,-1)),0===operation.length)return answer="",void(result.innerHTML=answer);try{"0"===operation[0]&&"."!==operation[1]&&operation.length>1&&(operation=operation.slice(1));const final=operation.replace(/x/g,"*").replace(/รท/g,"/");if(answer=+eval(final).toFixed(5),"="===key)return decimalAdded=!1,operation=`${answer}`,answer="",input.innerHTML=operation,void(result.innerHTML=answer);result.innerHTML=answer}catch(e){"="===key&&(decimalAdded=!1,input.innerHTML=`<span class="error">${operation}</span>`,result.innerHTML='<span class="error">Bad Expression</span>'),console.log(e)}}function clearInput(e){if(null!=e&&e.ctrlKey)return operation="",answer="",input.innerHTML=operation,void(result.innerHTML=answer);operation=operation.slice(0,-1),input.innerHTML=operation}deleteBtn.addEventListener("click",clearInput),keys.forEach(key=>{key.addEventListener("click",handleKeyPress),key.addEventListener("click",evaluate)});